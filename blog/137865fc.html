<!DOCTYPE html>
<html>
  <!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  
  <title>如何进行信息收集 - Skywalker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  
  <meta name="keywords" content=betta-cyber, game, betta, shokill>
  
    <meta name="description" content="betta">
  
  
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.02">
  
  
    <link rel="alternate" href="/atom.xml " title="Skywalker" type="application/atom+xml">
  

  

  

  <!-- <link rel="stylesheet" href="../css/style.css"> -->
  
<link rel="stylesheet" href="/css/style.css">

  <script type='text/javascript' id='clustrmaps' src='//cdn.clustrmaps.com/map_v2.js?cl=ffffff&w=0&t=n&d=b9cDq33TdEsfGb_DpY--uB2pjskzQ8TK9LaE3yuIYzE&co=ffffff&cmo=ffffff&cmn=ffffff&ct=ffffff'></script>
<meta name="generator" content="Hexo 5.4.1"></head>

  <body>
    <div class="container">
      <header class="header">
  <!-- <div class="blog-title">
    <a href="/" class="logo">Skywalker</a>
    <div class="subtitle"></div>
  </div> -->
  <nav class="navbar">
    <ul class="menu">
      
        <li class="menu-item">
          <a href="/" class="menu-item-link " >Home</a>
        </li>
      
        <li class="menu-item">
          <a href="/blog" class="menu-item-link active" >Blog</a>
        </li>
      
        <li class="menu-item">
          <a href="/ebook" class="menu-item-link " >Ebook</a>
        </li>
      
        <li class="menu-item">
          <a href="/music" class="menu-item-link " >Music</a>
        </li>
      
        <li class="menu-item">
          <a href="/about" class="menu-item-link " >About</a>
        </li>
      
    </ul>
  </nav>
</header>

<article class="post">
  <div class="post-title">
    <h1 class="article-title">如何进行信息收集</h1>
  </div>
  <div class="post-content">
    <h2 id="信息与情报"><a href="#信息与情报" class="headerlink" title="信息与情报"></a>信息与情报</h2><p>众所周知，知己知彼，百战不殆。在安全工作中，能做到对目标的充分认识，做好充足的信息情报收集工作，那么相信面对真正的安全事件的时候，我们可以有更多的应对方案。<br>做渗透时候的信息收集工作<br>比如渗透一个网站，我们先要做的是什么？<br>打好信息收集这一基础可以让测试者选择合适和准确的渗透测试攻击方式，缩短渗透测试的时间。一般来说收集的信息越多越好，通常包括以下几个部分：</p>
<ol>
<li>域名信息收集</li>
<li>子域名信息收集</li>
<li>站点信息收集</li>
<li>敏感信息收集</li>
<li>服务器信息收集</li>
<li>端口信息收集</li>
<li>真实 IP 地址识别</li>
<li>社会工程学</li>
</ol>
<p>我首先会使用的工具就是 Knockpy。之所以选择这个工具，是因为它可以为我提供一个带有响应码的子域快速浏览。有一次测试，我很快就发现了一个漏洞。</p>
<p><img src="/article_photo/01.png" alt="Knockpy"></p>
<p>我们可以先对目标进行子域侦察，使用 HOST 从 wordlist 获取域 &#x2F; 子域的 IP 地址。然后执行 Nmap 扫描端口。搞清楚要渗透的站点的各种信息，比如我们知道他这个站点使用的什么服务器，nginx？apache？我们知道他的站点用的什么技术栈，php 的框架？java？主站不好下手？那么其他的子域名有没有可以利用的？通常来讲。主站的防护比较好，但是不代表其他站点也有。</p>
<h2 id="域名信息收集"><a href="#域名信息收集" class="headerlink" title="域名信息收集"></a>域名信息收集</h2><p>一般来说，在做渗透测试之前，渗透测试人员能够了解到的信息有限，一般也就只知道一个域名，这就需要渗透测试人员首先要针对一个仅有的域名进行信息搜集，获取域名的注册信息，包括该域名的 DNS 服务器信息、子域信息和注册人的联系信息等信息。可以用以下几种方法来收集域名信息。</p>
<h3 id="Whois-查询"><a href="#Whois-查询" class="headerlink" title="Whois 查询"></a>Whois 查询</h3><p>whois 是用来查询域名的 IP 以及所有者等信息的传输协议。简单说，whois 就是一个用来查询域名是否已经被注册，以及注册域名的详细信息的数据库（如域名所有人、域名注册商），不同域名后缀的 Whois 信息需要到不同的 Whois 数据库查询。通过 whois 来实现对域名信息的查询，可以得到注册人的姓名和邮箱信息通常对测试个人站点非常有用，因为我们可以通过搜索引擎和社交网络挖掘出域名所有人的很多信息。</p>
<ul>
<li>Whois 站长之家查询：<a target="_blank" rel="noopener" href="http://whois.chinaz.com/">http://whois.chinaz.com/</a></li>
<li>阿里云中国万网查询：<a target="_blank" rel="noopener" href="https://whois.aliyun.com/">https://whois.aliyun.com/</a></li>
<li>Whois Lookup 查找目标网站所有者的信息：<a target="_blank" rel="noopener" href="http://whois.domaintools.com/">http://whois.domaintools.com/</a></li>
<li>Netcraft Site Report 显示目标网站上使用的技术：<a target="_blank" rel="noopener" href="http://toolbar.netcraft.com/site_report?url=">http://toolbar.netcraft.com/site_report?url=</a></li>
<li>Robtex DNS 查询显示关于目标网站的全面的 DNS 信息：<a target="_blank" rel="noopener" href="https://www.robtex.com/">https://www.robtex.com/</a></li>
<li>全球 Whois 查询：<a target="_blank" rel="noopener" href="https://www.whois365.com/cn/">https://www.whois365.com/cn/</a></li>
<li>站长工具爱站查询：<a target="_blank" rel="noopener" href="https://whois.aizhan.com/">https://whois.aizhan.com/</a><h3 id="备案信息查询"><a href="#备案信息查询" class="headerlink" title="备案信息查询"></a>备案信息查询</h3></li>
</ul>
<p>网站备案信息是根据国家法律法规规定，由网站所有者向国家有关部门申请的备案，是国家信息产业部对网站的一种管理途径，是为了防止在网上从事非法网站经营活动，当然主要是针对国内网站。</p>
<ul>
<li>ICP&#x2F;IP 地址 &#x2F; 域名信息备案管理系统：<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/publish/query/indexFirst.action">链接</a></li>
<li>ICP 备案查询网：<a target="_blank" rel="noopener" href="http://www.beianbeian.com/">http://www.beianbeian.com/</a></li>
<li>备案吧吧：<a target="_blank" rel="noopener" href="https://www.beian88.com/">https://www.beian88.com/</a></li>
<li>天眼查：<a target="_blank" rel="noopener" href="https://www.tianyancha.com/">https://www.tianyancha.com/</a></li>
</ul>
<h2 id="子域名信息收集"><a href="#子域名信息收集" class="headerlink" title="子域名信息收集"></a>子域名信息收集</h2><p>有些隐藏的、被忽略的子域上运行的应用程序可能帮助我们发现重大漏洞。<br>在同一个组织的不同域或应用程序中往往存在相同的漏洞，假设我们的目标网络规模比较大，直接从主域入手显然是很不理智的，因为对于这种规模的目标，一般其主域都是重点防护区域，所以不如先进入目标的某个子域，然后再想办法迂回接近真正的目标，这无疑是个比较好的选择。</p>
<h3 id="利用搜索引擎查询"><a href="#利用搜索引擎查询" class="headerlink" title="利用搜索引擎查询"></a>利用搜索引擎查询</h3><h3 id="利用在线工具查询"><a href="#利用在线工具查询" class="headerlink" title="利用在线工具查询"></a>利用在线工具查询</h3><ul>
<li>DNSdumpster：<a target="_blank" rel="noopener" href="https://dnsdumpster.com/">https://dnsdumpster.com/</a></li>
<li>whois 反查：<a target="_blank" rel="noopener" href="http://whois.chinaz.com/">http://whois.chinaz.com/</a></li>
<li>virustotal：<a target="_blank" rel="noopener" href="http://www.virustotal.com/">www.virustotal.com</a></li>
<li>子域名爆破：<a target="_blank" rel="noopener" href="https://phpinfo.me/domain/">https://phpinfo.me/domain/</a></li>
<li>IP 反查绑定域名：<a target="_blank" rel="noopener" href="http://dns.aizhan.com/">http://dns.aizhan.com/</a></li>
<li><a target="_blank" rel="noopener" href="https://hackertarget.com/find-dns-host-records/">https://hackertarget.com/find-dns-host-records/</a></li>
<li><a target="_blank" rel="noopener" href="https://site.ip138.com/">https://site.ip138.com</a></li>
</ul>
<h3 id="通过证书透明度公开日志枚举子域名"><a href="#通过证书透明度公开日志枚举子域名" class="headerlink" title="通过证书透明度公开日志枚举子域名"></a>通过证书透明度公开日志枚举子域名</h3><p>证书透明度是证书授权机构的一个项目，证书授权机构会将每个 SSL&#x2F;TLS 证书发布到公共日志中。一个 SSL&#x2F;TLS 证书通常包含域名、子域名和邮件地址，这些也经常成为攻击者非常希望获得的有用信息。<br>查找某个域名所属证书的最简单的方法就是使用搜索引擎来搜索一些公开的 CT 日志，例如以下网站：</p>
<ul>
<li>crt.sh：<a target="_blank" rel="noopener" href="https://crt.sh/">https://crt.sh</a></li>
<li>censys：<a target="_blank" rel="noopener" href="https://censys.io/">https://censys.io</a></li>
</ul>
<h2 id="Shodan（zoomeye…-）也是一把利器"><a href="#Shodan（zoomeye…-）也是一把利器" class="headerlink" title="Shodan（zoomeye….）也是一把利器"></a>Shodan（zoomeye….）也是一把利器</h2><p><a target="_blank" rel="noopener" href="https://www.shodan.io/">https://www.shodan.io/</a></p>
<h2 id="侦察-Github"><a href="#侦察-Github" class="headerlink" title="侦察 Github"></a>侦察 Github</h2><p>Github 对于查找目标的敏感信息非常有帮助。在公共 GitHub 存储库中可以找到访问密钥、密码、开放式端点、s3 buckets 以及备份文件等。<br>具体可以参考：<a target="_blank" rel="noopener" href="https://edoverflow.com/2017/github-for-bugbountyhunters/">https://edoverflow.com/2017/github-for-bugbountyhunters/</a></p>
<h2 id="仔细查看-JS-文件（静态文件）"><a href="#仔细查看-JS-文件（静态文件）" class="headerlink" title="仔细查看 JS 文件（静态文件）"></a>仔细查看 JS 文件（静态文件）</h2><p>有时，Javascript 文件中会包含一些敏感信息，例如各种密钥或硬编码令牌。<br>我在 Javascript 中找到了以下内容：<br>AWS 或其他服务访问密钥；<br>AWS S3 buckets 或其他具有读 &#x2F; 写权限的数据存储 buckets；<br>打开备份 sql 数据库端点；<br>开放内部服务端点</p>
<p>在 waybackmachine 中搜索目标网页，可以找到以下内容：<br>旧的和被弃用的 JS 文件；<br>旧 API 端点；<br>被弃用的 CDN 端点；<br>被弃用的子域名；<br>源代码注释中提供的 Dev&amp;staging 端点信息 ；<br>如果页面返回 403，你也可以在 way back machine 搜索目标那些 403 页面，你会发现一些有用的信息。<br><a target="_blank" rel="noopener" href="https://gist.github.com/mhmdiaa/adf6bff70142e5091792841d4b372050">gist 代码</a></p>
<h1 id="Web-服务器指纹识别"><a href="#Web-服务器指纹识别" class="headerlink" title="Web 服务器指纹识别"></a>Web 服务器指纹识别</h1><p>Web 服务器指纹识别是了解正在运行的 web 服务器类型和版本，目前市场上存在几种不同的 web 服务器提供商和软件版本，了解被测试的 web 服务器的类型，能让测试者更好去测试已知漏洞和大概的利用方法，将会在渗透测试过程中有很大的帮助，甚至会改变测试的路线。</p>
<p>Web 服务器指纹识别主要识别一下信息：<br>1、Web 服务器名称，版本<br>2、Web 服务器后端是否有应用服务器<br>3、数据库 (DBMS) 是否部署在同一主机 (host)，数据库类型<br>4、Web 应用使用的编程语言<br>5、Web 应用框架<br>……</p>
<ol>
<li>HTTP 头分析<br>即查看 HTTP 响应头中的 Server、X-Powered-By、Cookie 等字段，这也是最基本的方法。<br>如上图，从 Server 字段，我们可以发现服务器可能是 Apache，版本 2.4.6，运行在 CentOS Linux 系统上。<br>根据 X-Powered-By 字段我们可以判断识别出 web 框架，并且不同的 web 框架有其特有的 cookie，根据这个我们也能判断识别出 web 应用框架。</li>
<li>协议行为<br>即从 HTTP 头字段顺序分析，观察 HTTP 响应头的组织顺序，因为每个服务器都有一个内部的 HTTP 头排序方法。</li>
<li>浏览并观察网站<br>我们可以观察网站某些位置的 HTML 源码 (特殊的 class 名称) 及其注释 (comment) 部分，可能暴露有价值信息。观察网站页面后缀可以判断 Web 应用使用的编程语言和框架。</li>
<li>刻意构造错误<br>错误页面可以给你提供关于服务器的大量信息。可以通过构造含有随机字符串的 URL，并访问它来尝试得到 404 页面。<br>根据信息来选择攻击 exploit，有效准确打击。</li>
</ol>
<h2 id="延伸到其他场景的信息收集。"><a href="#延伸到其他场景的信息收集。" class="headerlink" title="延伸到其他场景的信息收集。"></a>延伸到其他场景的信息收集。</h2><h3 id="买房？"><a href="#买房？" class="headerlink" title="买房？"></a>买房？</h3><p>有无房源，直接去武汉市住房保障和房屋管理局查小区，小区的信息，哪一栋哪一户绝对比中介网站上面清晰明了。</p>
<h3 id="买车？"><a href="#买车？" class="headerlink" title="买车？"></a>买车？</h3><p>买车时候确认自己的需求，针对需求来选车，而不是道听途说。</p>
<h3 id="挑选工作？"><a href="#挑选工作？" class="headerlink" title="挑选工作？"></a>挑选工作？</h3><p>去了不好的单位，毁不当初，怎么当时没看出来。信息收集能力不够。合适的招聘岗位你没看到。不合适的你都看到了，怪没遇到好机会？</p>
<h2 id="如何科学决策？"><a href="#如何科学决策？" class="headerlink" title="如何科学决策？"></a>如何科学决策？</h2><p>决策是一个提出问题、分析问题、解决问题的完整的动态过程，遵循科学的决策程序。提出问题，确定目标。一切决策都是从问题开始。科学决策不同于经验决策。所以在决策前要收集有意义的信息，来综合考量。</p>
<h2 id="什么是情报？"><a href="#什么是情报？" class="headerlink" title="什么是情报？"></a>什么是情报？</h2><p>说了这么多怎么收集信息，但是信息要怎么用呢，现在社会的信息如此之多。又该怎么利用呢。从定义上来讲情报是一个主体主观能动的对一些与其目的相关的信息分析和处理。<br>从情报的类型上来看可以分为：资产情报、事件情报、漏洞情报和威胁情报。之前做过一段时间的漏洞情报收集，对各大知名黑客或者论坛已经 nvd，cve 这种官方的信息进行监控，可以对已经漏洞做到提前预知，提前防御。信息得到利用才算得上情报。</p>
<h2 id="实战分析一-世上最难侦探游戏"><a href="#实战分析一-世上最难侦探游戏" class="headerlink" title="实战分析一 世上最难侦探游戏"></a>实战分析一 世上最难侦探游戏</h2><p>nixintel 网站上曾经发布过一个限时挑战，从下面这张发布于 10 月 30 日的图片中推理出拍摄者所在酒店。</p>
<p><img src="/article_photo/02.png"></p>
<p>为了简化难度，还额外提供了三条信息：</p>
<ol>
<li>天空中的那道白线是一架波音 747-8F，此时，它正从伦敦飞往香港。</li>
<li>照片的拍摄时间是 2019 年 10 月 30 日。</li>
<li>拍摄者此时站在旅馆里。</li>
</ol>
<p>最通用的思路是用图片搜索，但是目前的搜索引擎只会给出一堆无关信息。这个肯定不行。</p>
<p>所以我们需要回过头来想一想，我们到底知道哪些信息？照片的拍摄时间是 2019 年 10 月 30 日，天气很晴朗，拍摄者背对着太阳，天空中飞过一架从伦敦飞往香港的波音 747。<br>所以解密的关键在于那架从伦敦飞往香港的飞机，要知道商业飞机的航线基本是固定的。既然航线是固定的，从伦敦到香港，而我们又知道照片拍摄的日期。<br>为了识别飞机，我们需要知道当天伦敦和香港之间往返的所有航班和飞机类型。<br>唯一的问题是伦敦有五个国际机场（希思罗机场、盖特威克机场、城市机场、斯坦斯特德机场、和卢顿机场），而香港只有一个。<br>这意味着查看从任何伦敦机场到达香港的航班将更容易，而不是尝试以五个可能的起点进行相反的推测。（这是小窍门）<br>历史航班数据可从几个不同的地方获得。 FlightRadar 是其中最知名的，但也有 Airportia 和 Flight Aware 等可用。<br>ps： 铁路信息查询 火车信息</p>
<p>FlightAware 会针对此类历史数据收费，而 Airportia 仅列出定期的客运航班。所以只要在相关的航空咨询网站查找一下在 2019 年 10 月 30 日这一天从伦敦飞往香港的飞机，再结合他的型号波音 747-8F 我们就可以得知照片中这架飞机航班号是 N617UP 找到这次航班之后，我们就可以在对所有人公开的网站上得到航班对应的 KML 文件。<br>KML 是一种特殊的文件格式，它可以在地图软件中显示特定的地理数据。比如一家飞机从起飞到降落所经过的所有的经纬度位置，还有他在每个具体点的飞行高度。将这架飞机的 KML 文件上传到谷歌地球之后，我们就可以准确的再现它在 2019 年 10 月 30 日的活动轨迹。</p>
<p>比如他是如何从伦敦起飞，又是如何从香港降落而照片的拍摄者就在这条狭长的飞行轨迹附近。现在我们的搜索范围从整个地球一下子缩到了这条狭长的轨迹上。所以接下来的问题就变成了在他按下快门的那一瞬间，这架飞机的这条线的哪个点？<br>因此，我们明确了飞机位置和时间的对应关系。实际上通过具体的位置和时间，我们就可以得知飞机在航线不同位置时的天气情况。具体操作方式我们一会儿再讲。而照片中飞机所在的天空晴空万里，所以我们首先可以排除那些在航线上处于黑夜的地段。<br>你可以在 Google Earth 中打开该文件，然后可以查看和分析 KML 映射数据。这意味着将能够在飞机旅程的每个阶段看到飞机的确切位置、高度和方向。</p>
<p>几何数据</p>
<p>有了所有的飞行路线数据，可以将其与日落 &#x2F; 日出信息和一些几何图形结合起来，以计算拍摄者的位置。<br>我们知道飞机在 UTC 06:12 从伦敦斯坦斯特德起飞。将这些信息放到 Suncalc 中，这表明当时斯坦斯特德的天空还很暗：</p>
<p><img src="/article_photo/03.png"></p>
<p>接下来，飞机驶向阿姆斯特丹。这是可能的目标位置城市吗？如果我们对阿姆斯特丹重复相同的 Suncalc 方法，则可以看到，当飞机在 UTC 06:37 越过该城市上空时，那里的天色还很暗，所以它不可能是拍摄者所在的地方。<br>请务必记住，无论本地时间如何，航班数据始终以 UTC 表示。这包括谷歌地图中的时间滑块，可用于显示飞机的位置。而另一方面，Suncalc 总是显示相对于 UTC 的当地时间，所以阿姆斯特丹是 UTC +1。这非常重要，如果不记得这个细节，很容易感到困惑！<br>因此，阿姆斯特丹不是答案，但是除了检查飞行路线附近的每个城市之外，还有没有简单一些的方法可以找到拍摄者可能所在的城市？<br>这是一些几何图形的来源。经过阿姆斯特丹之后，飞机在 089 度上改变了航向，几乎是直接向东。实际上，如果查看跟踪日志会找到，飞机在荷兰、德国、波兰、白俄罗斯和俄罗斯的整个过程中进行的一些微小的航向校正。<br>仅在俄罗斯，它才朝着哈萨克斯坦、中国大陆和香港做出重要航向修正：<br>图中你可以看到，飞机大约在 UTC 10:00（当地时间 15:00）越过哈萨克斯坦，但是到越过中国时当地已经很黑了。<br>这意味着在拍摄者不可能在中国。再排除一个。</p>
<p>由于飞机的航向通常总是东移，因此拍摄者一定是大致面向西的，才能使飞机在视觉上看起来朝向他。太阳从他身后照射的事实加上阴影的角度表明，太阳大约在东南方，即在他的左肩上方。</p>
<p><img src="/article_photo/04.png"></p>
<p>这意味着，无论拍摄者在哪里，他拍照的时间都是一大早。不可能在晚上。<br>可能的国家 &#x2F; 地区包括荷兰东部、德国、波兰、白俄罗斯或俄罗斯西部，因为这是飞机在白天和阳光仍然位于东南部时飞过的一系列地点。<br>这仍然留下了许多可能的城镇，但还有一种方法可以进一步缩小范围。<br>由于图片中建筑物的大小，有信心推测拍摄者在城市中。共有五层楼高，至少还有另外一到两层（基于拍摄者的身高）。因此，该建筑物至少高六到七层，并靠近拍摄者所在的酒店。<br>这有力地暗示了城市位置，而不是农村甚至郊区。<br>接下来我们需要做一些几何以帮助正确确定方向：</p>
<p><img src="/article_photo/05.png"></p>
<p>波兹南或华沙。伏尔加格勒可能是候选，但是对于太阳光线位置来说，飞机飞过头顶时应该是那里的一天中较晚的时刻：</p>
<p><img src="/article_photo/06.png"></p>
<p>但是这些地点得到天气都不符合拍摄者所在的晴朗蓝天：</p>
<p><img src="/article_photo/07.png"></p>
<p>雨天不太可能。但是，有一个城市是非常有可能的候选。它靠近飞行路线，并且城市的大部分也在正确的一侧：</p>
<p><img src="/article_photo/08.png"></p>
<p>天气记录也证实当时柏林上空没有云：</p>
<p><img src="/article_photo/09.png"></p>
<p>飞机经过柏林时，太阳也位于正确的位置（东南）：</p>
<p><img src="/article_photo/10.png"></p>
<p>因此，柏林似乎是拍摄者最有可能的所在地。<br>从 “伦敦和香港之间的某个地方” 的搜索参数开始，通过检查飞机经过某地时的日光状况，进一步筛选，去除不可能的国家。然后使用照片相对于飞行路径的方向，进一步淘汰一些国家中不可能的城市。这就是 “从最大到最小” 的思考方式。<br>柏林确实是唯一符合日光、天气条件、太阳位置以及相对于飞机飞行路线的方向和位置的正确标准的城市。找到这个位置的时候，基本上已经尽力了。想在柏林这么一座大城市里面，找到这么一栋毫无特色的建筑，简直是天方夜谭。</p>
<p>但是网络上面依旧有大神。他们把从不同地点看到的航线的角度和原图做对比，划定了一个和原图视角大致一致的区域。然后开始了摸网式的排查。利用工具可以构筑出类似的飞行视角。</p>
<p><img src="/article_photo/11.png"></p>
<p>最终经过大量的对比，那座熟悉的大楼终于出现在了我们的眼前。完美匹配！这意味着拍摄者所在的酒店是 H+ Hotel Mitte Berlin：</p>
<p><img src="/article_photo/12.png"></p>
<h3 id="实战分析二-我的一个朋友系列"><a href="#实战分析二-我的一个朋友系列" class="headerlink" title="实战分析二 我的一个朋友系列"></a>实战分析二 我的一个朋友系列</h3><p>我的一个朋友，有一个很重要的事情找我，多年交情，我想他可能是被绿了哈哈哈，然后决定帮他找一下。</p>
<p><img src="/article_photo/13.png"></p>
<p>只有一个微博的昵称，当时微博的通讯录匹配是很多社交软件都有的功能，可以看做变相的爬虫。</p>
<p>它可以通过获取用户手机的通讯录接口，读取联系人的手机号并进行匹配，有的还可以伪造某个字段的所有号码，比如 13900000001-13900001000，依次枚举对照。</p>
<p>微博可能没有对这个接口做监控和风控，导致个人信息数据泄露，如果关联出了用户 ID 到手机号，本质就属于个人信息的 “重标识” 了。然后当我有一个朋友有这个微博的数据，他这个 uid 放到库里面查了一下，找到了手机号是 xxxxxxxx。</p>
<p>微博入手：<br>从微博的信息可以大概确定一些身份信息。巨蟹座，可以推断确定大概生日。然后邮箱是 <a href="mailto:&#49;&#52;&#49;&#120;&#x78;&#x78;&#64;&#x71;&#x71;&#x2e;&#99;&#111;&#x6d;">&#49;&#52;&#49;&#120;&#x78;&#x78;&#64;&#x71;&#x71;&#x2e;&#99;&#111;&#x6d;</a>。大概可以确定 QQ 信息。个人 slogan 是如果心里想谁就去找谁吧 人就这一生 很短暂 没必要在乎别人的看法，公安一中毕业。大概确定老家位置。<br>然后顺疼摸瓜，确定一些互相关注：</p>
<p>XYG 迪 安徽六安 大学同学？同事？<br>大邱 Amour ，通过微博找人关注？</p>
<p>有一些互注<br>胡超凡 胡炒饭 1991 年 3 月 14 日 459999718 也是公安的。</p>
<p>通过这些大概对这个人有个了解。其实在此时，已经获取到了手机号，询问好朋友之后，他还需要定位，就是这个人的地理位置，具体住哪里。</p>
<p>看了一圈微博之后，发现发的东西能进行下一步提取的不多，于是转而分析其他平台，可以通过接口检测手机号码是否已注册，注册的话，拿到 id，然后看了一下关注列表和动态。<br><a target="_blank" rel="noopener" href="https://music.163.com/#/user/follows?id=xxxxxx">https://music.163.com/#/user/follows?id=xxxxxx</a><br>用处不大，于是继续转换，支付宝可以看看信息？不过感觉差不多把这个人的性格分析出来了。结果之前收集的诸多信息。微博有视频，但是没有地理位置，喜欢分享，id 叫发财，关注的都是一些美女之类的。还有微博小号。男性用户。于是决定转战 douyin。</p>
<p><img src="/article_photo/14.png"></p>
<p>分析 douyin，把电话号码添加到通讯录。通过通讯录查找出用户。</p>
<p><img src="/article_photo/15.png"><br><img src="/article_photo/16.png"></p>
<p>通过查看他的视频，看到他养了一条狗。通过室内家具摆设，房屋布局分析应该是租住的房子。最后在一条视频中出现了一闪而过的一个画面。</p>
<p><img src="/article_photo/17.png"></p>
<p>是一个小区的 logo，下面反正是什么什么城，于是通过安居客等软件进行地毯式搜索。终于百度出想要的结果。</p>
<p><img src="/article_photo/18.png"></p>
<p>最后找到小区，清江锦城。整个过程全部花费 2 个小时。</p>
<p>后续，我就不想再跟他分析了，他也觉得足够了，有了这个信息。本来还可以通过他的视频中出现的场景，构建推测出小区的户型，以及窗外的光线，推测出大致的楼层。这几个信息也足够有把握分析出，或者利用更简单的方式，伪装修宽带的，直接打电话问具体是哪一栋哪一户，也都可以，只要社工能力足够强，当然这已经不属于我讨论的范围了。</p>
<h3 id="社会工程学"><a href="#社会工程学" class="headerlink" title="社会工程学"></a>社会工程学</h3><p>社会工程学（Social Engineering）是一种通过人际交流的方式获得信息的非技术渗透手段。其实，现在的黑客攻击也不止是仅仅通过网络来进行远程的渗透与入侵，还会通过社会工程学在线下场景中来针对人性弱点进行相应的攻击。而且不幸的是，这种手段对于黑客来说非常有效，成功率也非常之高。事实上，社会工程学已是企业安全最大的威胁之一。狭义与广义社会工程学最明显的区别就是是否会与受害者产生交互行为。广义是有针对性的去对某一单一或多一目标进行攻击的行为。社会工程学在渗透测试中起着不小的作用，利用社会工程学，攻击者可以从一名员工的口中挖掘出本应该是秘密的信息。</p>
<p>社会工程学收集的常见信息包括：姓名、性别、出生日期、身份证号、身份证家庭住址、身份证所在公安局、快递收货地址、大致活动范围、qq、手机号、邮箱、银行 card 号（银行开户行）、支付宝、贴吧、百度、微博、猎聘、58、同城、网盘、微信、常用 ID、学历（小 &#x2F; 初 &#x2F; 高 &#x2F; 大学 &#x2F; 履历）、目标性格详细分析、常用密码、照片 EXIF 信息。<br>常见可获取信息系统包括：中航信系统、春秋航空系统、12306 系统、三大运营商网站、全国人口基本信息资源库、全国机动车 &#x2F; 驾驶人信息资源库、各大快递系统（越权）、全国出入境人员资源库、全国在逃人员信息资源库、企业相关系统、全国安全重点单位信息资源库等。</p>
<h4 id="举个例子："><a href="#举个例子：" class="headerlink" title="举个例子："></a>举个例子：</h4><p>假设我们要对一家公司进行渗透测试，正在收集目标的真实 IP 阶段，此时就可以利用收集到的这家公司的某位销售人员的电子邮箱。首先，给这位销售人员发送邮件，假装对某个产品很感兴趣，显然销售人员会回复邮件。这样攻击者就可以通过分析邮件头来收集这家公司的真实 IP 地址及内部电子邮件服务器的相关信息。通过进一步地应用社会工程学，假设现在已经收集了目标人物的邮箱、QQ、电话号码、姓名，以及域名服务商，也通过爆破或者撞库的方法获取邮箱的密码，这时就可以冒充目标人物要求客服人员协助重置域管理密码，甚至技术人员会帮着重置密码，从而使攻击者拿下域管理控制台，然后做域劫持。</p>
<h3 id="一些经验"><a href="#一些经验" class="headerlink" title="一些经验"></a>一些经验</h3><ol>
<li>网易云音乐 id<br>可以通过接口检测手机号码是否已注册<br>说明：调用此接口，可检测手机号码是否已注册 必选参数 : phone : 手机号码<br>调用例子<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000/cellphone/existence/check?phone=15175316380</span><br><span class="line">&#123;&#x27;exist&#x27;: -1, &#x27;nickname&#x27;: None, &#x27;hasPassword&#x27;: False, &#x27;code&#x27;: 200&#125;</span><br></pre></td></tr></table></figure></li>
<li>身份证查询<br>首先身份证查询是有社工库的，如果没有的话，可以随便找一个网站使用身份证进行合法校验计算。<br>我也写了一个身份证校验的 python 程序，这个不能。</li>
<li>联通手机营业厅<br>联通手机营业厅可以通过找回密码的方式去获取身份证的一些信息，主要是后四位，如果你已经知道该用户的手机号，那你可以通过<br>调用接口，该接口无调用限制，用 burp 或者 mitproxy 进行抓包。然后可以用 python 写一个发包的脚本。他要求你输入身份证后 6 位。一般通过用户的一些信息，生日之类的都可以拆解出来。故对最后四位进行爆破。还是很有效的。最后四位可以通过身份证的合法校验算法来<br>进行计算，然后得出一些合法的身份证号。减少爆破的次数。</li>
<li>12306<br>12306 是个神奇的软件，也是在密码重置的过程。这中间也是需要输入全部的身份证号和手机号对应。该接口不会打草惊蛇，因为上面的接口会发一个验证码，这个不会。但是 12306 的请求比较难构造，之前是通过 adb 的形式来点击手机做的，个人觉得比较低效。</li>
<li>支付宝的身份占用申诉<br>通过支付宝的身份申诉，如果不知道他的手机号，可以通过该接口进行查询。会返回 123××××3333 这样的手机号，这样就除了中间四位就都知道了。这样的信息比较靠谱。因为支付宝涉及到支付。</li>
<li>支付宝转账<br>支付宝可以通过邮箱转账，通过手机号转账，里面有很多信息。一定要关注，包括生日，包括职业信息，星座等等，常用 ID。</li>
<li>微信 QQ</li>
<li>搜素引擎<br>通过 <a target="_blank" rel="noopener" href="https://www.reg007.com/">https://www.reg007.com/</a> 来搜索相关的用户 ID 是否注册。<br>也可以利用搜索引擎做，比如：使用 google 这样搜索，百度也可以。<br>获取用户的 hupu 发言<br>site:<a target="_blank" rel="noopener" href="https://bbs.hupu.com/">https://bbs.hupu.com</a> “用户昵称”<br>来获取一个用户的豆瓣小组的发帖或者回复。<br>site:<a target="_blank" rel="noopener" href="http://www.douban.com/group/topic/">http://www.douban.com/group/topic/</a> “用户昵称”</li>
<li>诱导 IP 定位<br><a target="_blank" rel="noopener" href="https://lcx.cc/post/4595/">https://lcx.cc/post/4595/</a></li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文的目的，并不是想告诉大家用什么方法可以扒出一个人的信息，而是为了告诉大家注意保护自己的隐私安全，因此全文也只是简单介绍，点到为止，这些年来，想人肉出一个人越来越简单。<br>当前，大多数人依然没有意识到信息情报的价值，或是虽然意识到但却并不理解真正的情报是什么，缺乏对情报的敏感性。<br>大多数人的做法是从网上直接通过百度关键词搜索，缺乏工作创造性，不注重对广泛存在的社会影像记录、核心竞争力、市场反应、产业趋势、政治、经济、文化等等大规模、多层次、多角度的信息收集，以及进行必要而且专业的深度数据挖掘和技术分析。而这正凸显了大众对情报数据收集的缺陷：局部、零散和单维。简单来说，就是 “不高级”，无法真正满足情报的要求。<br>随着《个人信息保护法》正式施行，买卖个人信息最高可处 7 年有期徒刑。我们收到的骚扰电话会越来越少吗？个人隐私能更好的得到保障吗？与其等着这些网站 APP 来慢慢执行，还不如从自己开始注意隐私保护。</p>

  </div>
  <div class="post-footer">
    

    <a href="#top" class="top">↑</a>
  </div>
</article>
<footer>
  &copy; 2023
  <span class="author">
    betta
  </span>
</footer>

    </div>
  </body>
</html>
